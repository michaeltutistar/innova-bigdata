<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sistema electoral — Recuperar contraseña</title>

  <!-- Bootstrap 5 + Icons -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <link rel="stylesheet" href="css/style.css" />
</head>

<body class="se-body">

  <div class="se-bg" aria-hidden="true"></div>

  <main class="container se-h100 d-flex align-items-center justify-content-center py-4">
    <div class="row w-100 justify-content-center">
      <div class="col-12 col-sm-11 col-md-8 col-lg-6 col-xl-5">

        <div class="se-card shadow-lg">
          <div class="se-card-head">
            <div class="se-logo-wrap">
              <img src="assets/img/francisco-fajardo-abogados-pasto.png" alt="Logo" class="se-logo img-fluid">
            </div>

            <div class="mt-3">
              <h1 class="se-title mb-1">Recuperar contraseña</h1>
              <p class="se-subtitle mb-0">
                Recuperación segura con verificación por código.
              </p>
            </div>
          </div>

          <div class="se-card-body">
            <form id="formRecover" novalidate>

              <!-- Alert -->
              <div id="alertBox" class="alert d-none" role="alert"></div>

              <!-- Steps -->
              <div class="se-steps mb-3">
                <div class="se-step is-active" data-step-dot="1"><span>1</span> Correo</div>
                <div class="se-step" data-step-dot="2"><span>2</span> Código</div>
                <div class="se-step" data-step-dot="3"><span>3</span> Nueva clave</div>
              </div>

              <!-- STEP 1: Email -->
              <section class="se-step-panel" data-step="1">
                <div class="mb-3">
                  <label for="correo" class="form-label se-label">Correo</label>
                  <div class="input-group se-inputgroup">
                    <span class="input-group-text se-ig-icon">
                      <i class="bi bi-envelope-at"></i>
                    </span>
                    <input
                      type="email"
                      class="form-control se-input"
                      id="correo"
                      name="correo"
                      placeholder="usuario@dominio.com"
                      autocomplete="email"
                      required
                    />
                    <div class="invalid-feedback">Ingrese un correo válido.</div>
                  </div>
                  <small class="d-block mt-2" style="color: rgba(234,240,255,.62);">
                    Enviaremos un código de verificación al correo registrado.
                  </small>
                </div>

                <button id="btnSendCode" class="btn se-btn-primary w-100" type="button">
                  <span class="se-btn-text">
                    <i class="bi bi-send-check me-2"></i> Enviar código
                  </span>
                  <span class="se-btn-loading d-none">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Procesando...
                  </span>
                </button>

                <div class="text-center mt-3">
                  <a class="se-link" href="login.html">
                    <i class="bi bi-arrow-left-circle me-1"></i> Volver al login
                  </a>
                </div>
              </section>

              <!-- STEP 2: Code -->
              <section class="se-step-panel d-none" data-step="2">
                <div class="mb-3">
                  <label class="form-label se-label">Código de verificación</label>

                  <div class="se-otp">
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 1" required>
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 2" required>
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 3" required>
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 4" required>
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 5" required>
                    <input class="se-otp-in" inputmode="numeric" maxlength="1" aria-label="Dígito 6" required>
                  </div>

                  <div class="mt-2 d-flex align-items-center justify-content-between flex-wrap gap-2">
                    <small style="color: rgba(234,240,255,.62);">
                      Código de 6 dígitos. Vigencia: <b id="timerTxt">05:00</b>
                    </small>

                    <button id="btnResend" type="button" class="btn se-btn-soft">
                      <i class="bi bi-arrow-repeat me-1"></i> Reenviar
                    </button>
                  </div>

                  <div class="invalid-feedback d-block d-none" id="otpInvalid">
                    Ingrese el código completo (6 dígitos).
                  </div>
                </div>

                <button id="btnVerifyCode" class="btn se-btn-primary w-100" type="button">
                  <span class="se-btn-text">
                    <i class="bi bi-shield-check me-2"></i> Verificar código
                  </span>
                  <span class="se-btn-loading d-none">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Verificando...
                  </span>
                </button>

                <div class="text-center mt-3">
                  <button id="btnBack1" type="button" class="btn se-btn-link">
                    <i class="bi bi-arrow-left me-1"></i> Cambiar correo
                  </button>
                </div>
              </section>

              <!-- STEP 3: New Password -->
              <section class="se-step-panel d-none" data-step="3">
                <div class="mb-3">
                  <label for="newPass" class="form-label se-label">Nueva contraseña</label>
                  <div class="input-group se-inputgroup">
                    <span class="input-group-text se-ig-icon">
                      <i class="bi bi-key"></i>
                    </span>
                    <input
                      type="password"
                      class="form-control se-input"
                      id="newPass"
                      name="newPass"
                      placeholder="••••••••"
                      minlength="8"
                      required
                    />
                    <button class="btn se-btn-eye" type="button" id="toggleNewPass" aria-label="Mostrar u ocultar contraseña">
                      <i class="bi bi-eye"></i>
                    </button>
                    <div class="invalid-feedback" id="newPassInvalid">
                      La contraseña no cumple los requisitos.
                    </div>
                  </div>

                  <div class="se-rules mt-2" aria-live="polite">
                    <div class="se-rule" data-rule="len"><i class="bi bi-dot"></i> Mínimo 8 caracteres</div>
                    <div class="se-rule" data-rule="upper"><i class="bi bi-dot"></i> 1 mayúscula (A-Z)</div>
                    <div class="se-rule" data-rule="lower"><i class="bi bi-dot"></i> 1 minúscula (a-z)</div>
                    <div class="se-rule" data-rule="num"><i class="bi bi-dot"></i> 1 número (0-9)</div>
                    <div class="se-rule" data-rule="special"><i class="bi bi-dot"></i> 1 carácter especial</div>
                  </div>
                </div>

                <div class="mb-2">
                  <label for="confirmPass" class="form-label se-label">Confirmar contraseña</label>
                  <div class="input-group se-inputgroup">
                    <span class="input-group-text se-ig-icon">
                      <i class="bi bi-shield-lock"></i>
                    </span>
                    <input
                      type="password"
                      class="form-control se-input"
                      id="confirmPass"
                      name="confirmPass"
                      placeholder="••••••••"
                      required
                    />
                    <button class="btn se-btn-eye" type="button" id="toggleConfirmPass" aria-label="Mostrar u ocultar contraseña">
                      <i class="bi bi-eye"></i>
                    </button>
                    <div class="invalid-feedback">
                      Las contraseñas no coinciden.
                    </div>
                  </div>
                </div>

                <button id="btnResetPass" class="btn se-btn-primary w-100 mt-3" type="submit">
                  <span class="se-btn-text">
                    <i class="bi bi-check2-circle me-2"></i> Actualizar contraseña
                  </span>
                  <span class="se-btn-loading d-none">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Guardando...
                  </span>
                </button>

                <div class="se-foot mt-3 text-center">
                  <span class="se-foot-muted">Proceso auditado • Control de seguridad activo</span>
                </div>
              </section>

            </form>
          </div>
        </div>

        <p class="se-copy text-center mt-3 mb-0">
          © <span id="yearNow"></span> • Sistema electoral • Seguridad y confidencialidad
        </p>

      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- JS Recuperación -->
  <script src="js/recuperar.js"></script>
</body>
</html>
